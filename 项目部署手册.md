# 股票策略回测与分析系统 - 多平台部署手册

**版本**: 6.0.0
**更新日期**: 2026-01-20
**作者**: Manus AI

---

## 1. 部署环境要求与最低配置

本系统采用前后端分离架构，核心依赖于 **Python** (后端计算) 和 **Node.js** (前端展示) 环境。

### 1.1. 硬件最低配置要求

由于引入了机器学习预测算法（a7_advanced_forecast.py），对 CPU 和内存有一定要求。

| 组件 | 最低配置 | 推荐配置 | 备注 |
| :--- | :--- | :--- | :--- |
| **CPU** | 2 核 | 4 核以上 | 核心回测、分析和预测脚本使用多进程并行计算，核心数越多，速度越快。 |
| **内存 (RAM)** | 4 GB | 8 GB 以上 | 机器学习模型训练和预测过程需要一定内存缓存。 |
| **存储 (Disk)** | 5 GB 可用空间 | 20 GB SSD | 股票历史数据文件（CSV）占用空间较小，但SSD能显著提高数据读取速度。 |

### 1.2. 软件要求与系统版本

| 软件 | 推荐版本 | 系统版本 | 用途 |
| :--- | :--- | :--- | :--- |
| **Python** | 3.8 - 3.11 | Windows 10+, macOS 10.15+, Ubuntu 20.04+ | 后端脚本运行，数据处理，机器学习 |
| **Node.js** | 18.0 或更高版本 | Windows 10+, macOS 10.15+, Ubuntu 20.04+ | 前端应用运行，构建 |
| **pnpm** | 最新版 | 通用 | 前端包管理工具 |
| **Git** | 最新版 | 通用 | 代码版本管理 |

---

## 2. 跨平台通用部署步骤

### 步骤 2.1: 克隆代码仓库

```bash
git clone https://github.com/zdsy-aa/tdx-strategy-backtest.git
cd tdx-strategy-backtest
git checkout develop # 切换到开发分支以获取最新功能
```

### 步骤 2.2: 配置 Python 环境 (后端)

```bash
# 1. 创建虚拟环境
python3 -m venv venv

# 2. 激活虚拟环境
# Linux/macOS: source venv/bin/activate
# Windows (PowerShell): .\venv\Scripts\Activate.ps1

# 3. 安装 Python 依赖
# 包含 akshare, pandas, numpy, scikit-learn, filterpy 等
pip install -r requirements.txt
```

### 步骤 2.3: 配置 Node.js 环境 (前端)

```bash
# 1. 进入 web 目录
cd web

# 2. 安装前端依赖
pnpm install

# 3. 启动开发服务器
pnpm dev
```

---

## 3. 平台专项部署指南

### 3.1. Windows 平台 (Windows 10/11)

- **Python**: 建议从官网下载安装包，安装时务必勾选 **“Add Python to PATH”**。
- **C++ 构建工具**: 运行机器学习库（如 `scikit-learn`）可能需要 Microsoft Visual C++ 14.0 或更高版本。建议安装 [Visual Studio 生成工具](https://visualstudio.microsoft.com/visual-cpp-build-tools/)。

### 3.2. Linux 平台 (Ubuntu 20.04+)

```bash
sudo apt update
sudo apt install -y git python3 python3-pip python3-venv nodejs npm
sudo npm install -g pnpm
```

### 3.3. macOS 平台

推荐使用 Homebrew 安装依赖：
```bash
brew install python@3.11 node pnpm
```

---

## 4. 常见问题排查

1.  **数据下载失败**: 检查网络连接，确保能访问 AKShare 的数据源。
2.  **预测脚本运行缓慢**: 机器学习预测计算量大，建议使用 `--limit` 参数限制股票数量，或增加 CPU 核心数。
3.  **Web 页面数据不更新**: 确保运行了 `a99_update_web_data.py` 或直接运行 `a0_auto_update_daily.py`。

---

**文档结束**
