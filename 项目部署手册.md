# TDX 策略回测系统 - 终极部署手册 (小白友好版)

> **版本**: 4.0.0  
> **更新日期**: 2026-01-11
> **目标读者**: 任何对本项目感兴趣，但可能不具备深厚编程背景的朋友。

---

## 前言

你好！欢迎使用 TDX 策略回测系统。这份手册将手把手地带你完成从零到一的整个部署过程。无论你是 Windows 用户还是 Linux 用户，只要跟着步骤走，即使是第一次接触代码，也能成功运行本项目。

我们将分为两大章节，请根据你的操作系统选择对应的章节阅读：

*   **第一章：Windows 平台部署指南**
*   **第二章：Linux (Ubuntu) 平台部署指南**

让我们开始吧！

---

## 第一章：Windows 平台部署指南

本章节专门为 Windows 10 和 Windows 11 用户编写。

### 第1步：安装必备软件 (Git, Python, Node.js)

在开始之前，我们需要安装三个基础软件。如果你的电脑上已经安装过，可以跳到下一步。

#### 1.1 安装 Git (代码版本管理工具)

*   **作用**: 用来从 GitHub 上下载 (克隆) 项目代码。
*   **下载地址**: [https://git-scm.com/download/win](https://git-scm.com/download/win)
*   **安装步骤**:
    1.  打开下载地址，网站会自动为你下载合适的安装包。
    2.  双击运行安装包，一路点击 “Next” 使用默认设置即可。
*   **验证安装**:
    1.  在桌面点击鼠标右键，如果看到菜单里出现了 “Git Bash Here” 或 “Open Git Bash here”，说明安装成功。

#### 1.2 安装 Python (后端运行环境)

*   **作用**: 用来运行项目的数据下载和策略回测脚本。
*   **下载地址**: [https://www.python.org/downloads/](https://www.python.org/downloads/)
*   **安装步骤**:
    1.  打开下载地址，点击 “Download Python 3.x.x” (x代表版本号，推荐 3.11 或更高)。
    2.  双击运行安装包。
    3.  **【极其重要】** 在安装界面的最下方，**务必勾选 “Add Python to PATH”** 这个选项！
    4.  点击 “Install Now” 进行安装。
*   **验证安装**:
    1.  按下 `Win` + `R` 键，输入 `cmd` 并回车，打开命令提示符。
    2.  输入 `python --version` 并回车。如果显示出 Python 的版本号，说明安装成功。

#### 1.3 安装 Node.js (前端运行环境)

*   **作用**: 用来运行和构建项目的前端网页界面。
*   **下载地址**: [https://nodejs.org/](https://nodejs.org/)
*   **安装步骤**:
    1.  打开下载地址，选择左侧的 “LTS” (长期支持) 版本进行下载。
    2.  双击运行安装包，一路点击 “Next” 使用默认设置即可。
*   **验证安装**:
    1.  同样在命令提示符 (`cmd`) 中，输入 `node --version` 并回车。
    2.  再输入 `npm --version` 并回车。如果都显示版本号，说明安装成功。

### 第2步：下载项目与配置环境

#### 2.1 下载 (克隆) 项目代码

1.  找一个你喜欢的位置用来存放项目，例如 `D:	dx-project`。
2.  在该文件夹内，点击鼠标右键，选择 “Git Bash Here” 打开 Git 终端。
3.  在弹出的黑色窗口中，输入以下命令并回车：
    ```bash
    gh repo clone zdsy-aa/tdx-strategy-backtest
    ```
4.  等待下载完成。完成后，你会看到一个名为 `tdx-strategy-backtest` 的新文件夹。

#### 2.2 配置后端 (Python) 环境

1.  **进入项目目录**: 在刚才的 Git Bash 窗口中，输入以下命令进入项目文件夹：
    ```bash
    cd tdx-strategy-backtest
    ```
2.  **创建并激活虚拟环境**: 这是一个独立、干净的 Python 环境，可以避免库版本冲突。
    ```bash
    # 创建虚拟环境
    python -m venv venv

    # 激活虚拟环境 (注意这里的路径)
    source venv/Scripts/activate
    ```
    激活成功后，你会看到命令行前面出现了 `(venv)` 的字样。

3.  **安装 Python 依赖库**: 这些是项目后端运行所必需的库。
    ```bash
    # 如果网络好，直接运行
    pip install -r requirements.txt

    # 如果下载慢，使用国内镜像源
    # pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
    ```

#### 2.3 配置前端 (Node.js) 环境

1.  **安装 pnpm**: 这是一个更快、更高效的包管理工具。
    ```bash
    npm install -g pnpm
    ```
2.  **进入前端目录并安装依赖**: 
    ```bash
    # 进入 web 目录
    cd web

    # 安装依赖
    pnpm install

    # 如果下载慢，先设置国内镜像源再安装
    # pnpm config set registry https://registry.npmmirror.com
    # pnpm install
    ```
3.  **返回项目根目录**: 
    ```bash
    cd ..
    ```

### 第3步：运行项目

现在，万事俱备，只欠东风！

#### 3.1 准备数据 (关键步骤)

在看漂亮的网页之前，我们必须先让后端脚本把数据准备好。

1.  **确保虚拟环境已激活**: 检查命令行前面是否有 `(venv)`。
2.  **进入 Python 脚本目录**: 
    ```bash
    cd py_file
    ```
3.  **下载股票数据**: 
    ```bash
    # 第一次运行时，需要下载全部数据，耗时较长 (约30-60分钟)，请耐心等待
    python stock_downloader.py --full
    ```
4.  **运行回测并生成报告**: 
    ```bash
    # 这两个脚本现在是并行化的，会利用你电脑的所有CPU核心，速度很快
    python full_backtest.py
    python generate_stock_reports.py
    ```

#### 3.2 启动前端网页

1.  **回到项目根目录**: 
    ```bash
    cd ..
    ```
2.  **进入前端目录**: 
    ```bash
    cd web
    ```
3.  **启动开发服务器**: 
    ```bash
    pnpm dev
    ```
4.  **访问网页**: 终端会显示一个网址，通常是 `http://localhost:5173`。在你的浏览器 (推荐 Chrome 或 Edge) 中打开这个地址，你就能看到回测系统的界面了！

---

## 第二章：Linux (Ubuntu) 平台部署指南

本章节专门为 Ubuntu 22.04 及以上版本的用户编写。

### 第1步：安装必备软件 (Git, Python, Node.js)

我们将使用 `apt` 包管理器来安装所有必需的软件。

1.  **打开终端**: 按下 `Ctrl` + `Alt` + `T`。
2.  **更新包列表并安装**: 
    ```bash
    # 更新系统包
    sudo apt update && sudo apt upgrade -y

    # 安装 Git, Python 3.11+, pip 和 venv
    sudo apt install -y git python3.11 python3-pip python3.11-venv
    ```
3.  **安装 Node.js (推荐使用 nvm)**: `nvm` 是一个优秀的 Node.js 版本管理器。
    ```bash
    # 下载并运行 nvm 安装脚本
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash

    # 让 nvm 生效 (或者重启终端)
    source ~/.bashrc

    # 安装 Node.js 18
    nvm install 18
    nvm use 18
    ```
4.  **安装 pnpm**: 
    ```bash
    npm install -g pnpm
    ```

### 第2步：下载项目与配置环境

#### 2.1 下载 (克隆) 项目代码

1.  在终端中，进入你希望存放项目的目录，例如 `~/projects`。
2.  输入以下命令下载项目并进入目录：
    ```bash
    gh repo clone zdsy-aa/tdx-strategy-backtest
    cd tdx-strategy-backtest
    ```

#### 2.2 配置后端 (Python) 环境

1.  **创建并激活虚拟环境**: 
    ```bash
    # 创建虚拟环境
    python3 -m venv venv

    # 激活虚拟环境
    source venv/bin/activate
    ```
    激活成功后，命令行前面会出现 `(venv)`。

2.  **安装 Python 依赖库**: 
    ```bash
    # 如果网络好，直接运行
    pip install -r requirements.txt

    # 如果下载慢，使用国内镜像源
    # pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
    ```

#### 2.3 配置前端 (Node.js) 环境

1.  **进入前端目录并安装依赖**: 
    ```bash
    # 进入 web 目录
    cd web

    # 安装依赖
    pnpm install

    # 如果下载慢，先设置国内镜像源再安装
    # pnpm config set registry https://registry.npmmirror.com
    # pnpm install
    ```
2.  **返回项目根目录**: 
    ```bash
    cd ..
    ```

### 第3步：运行项目

#### 3.1 准备数据 (关键步骤)

1.  **确保虚拟环境已激活**: 检查命令行前面是否有 `(venv)`。
2.  **进入 Python 脚本目录**: 
    ```bash
    cd py_file
    ```
3.  **下载股票数据**: 
    ```bash
    # 第一次运行时，需要下载全部数据，耗时较长 (约30-60分钟)，请耐心等待
    python stock_downloader.py --full
    ```
4.  **运行回测并生成报告**: 
    ```bash
    # 这两个脚本现在是并行化的，会利用你电脑的所有CPU核心，速度很快
    python full_backtest.py
    python generate_stock_reports.py
    ```

#### 3.2 启动前端网页

1.  **回到项目根目录**: 
    ```bash
    cd ..
    ```
2.  **进入前端目录**: 
    ```bash
    cd web
    ```
3.  **启动开发服务器**: 
    ```bash
    pnpm dev
    ```
4.  **访问网页**: 终端会显示一个网址，通常是 `http://localhost:5173`。在你的浏览器中打开这个地址，你就能看到回测系统的界面了！

---

## 结语

恭喜你！你已经成功部署并运行了 TDX 策略回测系统。现在你可以自由探索、回测你感兴趣的策略了。如果在部署过程中遇到任何问题，可以参考 `回测系统详细开发说明.md` 文档中的 FAQ 部分，或者在 GitHub 项目页提交 Issue。
